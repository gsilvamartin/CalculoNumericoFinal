"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ErrorAssertions_1 = require("../utilities/ErrorAssertions");
/**
 * Uses expansion of minors to calculate the determinant of a matrix.
 * Throws an error if the input is not square.
 *
 * @param matrix - A square matrix
 * @returns - The determinant
 * @public
 */
function determinant(matrix) {
    ErrorAssertions_1.assertSquare(matrix);
    var ops = matrix.ops();
    var builder = matrix.builder();
    // Definition of a 2x2 determinant
    if (matrix.getNumberOfRows() === 2) {
        return ops.subtract(ops.multiply(matrix.getEntry(0, 0), matrix.getEntry(1, 1)), ops.multiply(matrix.getEntry(0, 1), matrix.getEntry(1, 0)));
    }
    // Calculate NxN determinant by expansion of minors
    var det = ops.zero();
    for (var j = 0; j < matrix.getNumberOfColumns(); j++) {
        var signFlipped = j % 2 === 1;
        var determinantOfMinor = determinant(builder.exclude(matrix, 0, j));
        var weight = matrix.getEntry(0, j);
        var quantityToAdd = ops.multiply(determinantOfMinor, weight);
        if (signFlipped) {
            quantityToAdd = ops.multiply(quantityToAdd, ops.negativeOne());
        }
        det = ops.add(det, quantityToAdd);
    }
    return det;
}
exports.determinant = determinant;
//# sourceMappingURL=Determinant.js.map